{"version":3,"sources":["../src/utils/transformers/transform-icons.ts","../src/utils/transformers/transform-menu.ts"],"names":["transformIcons","sourceFile","config","iconLibrary","iconLibraries","targetLibrary","libraryConfig","transformedIcons","element","SyntaxKind","libraryPropAttr","attr","jsxIconAttr","targetIconName","usageMatch","jsxAttr","componentName","defaultPropsStr","userAttributes","existingPropNames","defaultPropsToAdd","prop","propName","allProps","importDeclaration","iconPlaceholderImport","specifier","importStatements","addedImports","importStmt","importMatch","importedNames","modulePath","namedImports","name","icon","newImport","_useSemicolon","importDecl","transformMenu","replacement","initializer","text","newText"],"mappings":"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","file":"chunk-WBIIXVVG.js","sourcesContent":["import { iconLibraries, type IconLibraryName } from \"@/src/icons/libraries\"\nimport { Transformer } from \"@/src/utils/transformers\"\nimport { SourceFile, SyntaxKind } from \"ts-morph\"\n\nexport const transformIcons: Transformer = async ({ sourceFile, config }) => {\n  const iconLibrary = config.iconLibrary\n\n  // Fail silently if the icon library is not supported.\n  // This is for legacy icon libraries.\n  if (!iconLibrary || !(iconLibrary in iconLibraries)) {\n    return sourceFile\n  }\n\n  const targetLibrary = iconLibrary as IconLibraryName\n  const libraryConfig = iconLibraries[targetLibrary]\n  let transformedIcons: string[] = []\n\n  for (const element of sourceFile.getDescendantsOfKind(\n    SyntaxKind.JsxSelfClosingElement\n  )) {\n    if (element.getTagNameNode()?.getText() !== \"IconPlaceholder\") {\n      continue\n    }\n\n    // Find the library-specific prop (e.g., \"lucide\", \"tabler\", \"hugeicons\")\n    const libraryPropAttr = element.getAttributes().find((attr) => {\n      if (attr.getKind() !== SyntaxKind.JsxAttribute) {\n        return false\n      }\n      const jsxAttr = attr.asKindOrThrow(SyntaxKind.JsxAttribute)\n      return jsxAttr.getNameNode().getText() === targetLibrary\n    })\n\n    if (!libraryPropAttr) {\n      continue // No icon specified for this library\n    }\n\n    const jsxIconAttr = libraryPropAttr.asKindOrThrow(SyntaxKind.JsxAttribute)\n    const targetIconName = jsxIconAttr\n      .getInitializer()\n      ?.getText()\n      .replace(/^[\"']|[\"']$/g, \"\")\n\n    if (!targetIconName) {\n      continue\n    }\n\n    if (!transformedIcons.includes(targetIconName)) {\n      transformedIcons.push(targetIconName)\n    }\n\n    const usage = libraryConfig.usage\n    const usageMatch = usage.match(/<(\\w+)([^>]*)\\s*\\/>/)\n\n    // Remove the library-specific prop\n    jsxIconAttr.remove()\n\n    // Remove all other library-specific props\n    for (const attr of element.getAttributes()) {\n      if (attr.getKind() !== SyntaxKind.JsxAttribute) {\n        continue\n      }\n      const jsxAttr = attr.asKindOrThrow(SyntaxKind.JsxAttribute)\n      const attrName = jsxAttr.getNameNode().getText()\n      // Filter out library-specific props (lucide, tabler, hugeicons, etc.)\n      if (attrName in iconLibraries) {\n        jsxAttr.remove()\n      }\n    }\n\n    if (!usageMatch) {\n      element.getTagNameNode()?.replaceWithText(targetIconName)\n      continue\n    }\n\n    const [, componentName, defaultPropsStr] = usageMatch\n\n    if (componentName === \"ICON\") {\n      // Get remaining user attributes (non-library props)\n      const userAttributes = element\n        .getAttributes()\n        .filter((attr) => {\n          if (attr.getKind() !== SyntaxKind.JsxAttribute) {\n            return true\n          }\n          const jsxAttr = attr.asKindOrThrow(SyntaxKind.JsxAttribute)\n          const attrName = jsxAttr.getNameNode().getText()\n          // Filter out library-specific props (lucide, tabler, hugeicons, etc.)\n          return !(attrName in iconLibraries)\n        })\n        .map((attr) => attr.getText())\n        .join(\" \")\n\n      if (userAttributes.trim()) {\n        element.replaceWithText(`<${targetIconName} ${userAttributes} />`)\n      } else {\n        element.getTagNameNode()?.replaceWithText(targetIconName)\n      }\n    } else {\n      const existingPropNames = new Set(\n        element\n          .getAttributes()\n          .filter((attr) => attr.getKind() === SyntaxKind.JsxAttribute)\n          .map((attr) =>\n            attr.asKindOrThrow(SyntaxKind.JsxAttribute).getNameNode().getText()\n          )\n      )\n\n      // Replace ICON placeholder in defaultPropsStr with actual icon name\n      const defaultPropsWithIcon = defaultPropsStr.replace(\n        /\\{ICON\\}/g,\n        `{${targetIconName}}`\n      )\n\n      const defaultPropsToAdd = defaultPropsWithIcon\n        .trim()\n        .split(/\\s+(?=\\w+=)/)\n        .filter((prop) => prop)\n        .map((prop) => {\n          const propName = prop.split(\"=\")[0]\n          return propName && !existingPropNames.has(propName) ? prop : null\n        })\n        .filter(Boolean)\n\n      const userAttributes = element\n        .getAttributes()\n        .filter((attr) => {\n          if (attr.getKind() !== SyntaxKind.JsxAttribute) {\n            return true\n          }\n          const jsxAttr = attr.asKindOrThrow(SyntaxKind.JsxAttribute)\n          const attrName = jsxAttr.getNameNode().getText()\n          // Filter out library-specific props (lucide, tabler, hugeicons, etc.)\n          return !(attrName in iconLibraries)\n        })\n        .map((attr) => attr.getText())\n        .join(\" \")\n\n      const allProps = [...defaultPropsToAdd, userAttributes]\n        .filter(Boolean)\n        .join(\" \")\n\n      element.replaceWithText(`<${componentName} ${allProps} />`)\n    }\n  }\n\n  for (const importDeclaration of sourceFile.getImportDeclarations() ?? []) {\n    const moduleSpecifier = importDeclaration.getModuleSpecifier()?.getText()\n    if (moduleSpecifier?.includes(\"icon-placeholder\")) {\n      const namedImports = importDeclaration.getNamedImports() ?? []\n      const iconPlaceholderImport = namedImports.find(\n        (specifier) => specifier.getName() === \"IconPlaceholder\"\n      )\n\n      if (iconPlaceholderImport) {\n        iconPlaceholderImport.remove()\n      }\n\n      if (importDeclaration.getNamedImports()?.length === 0) {\n        importDeclaration.remove()\n      }\n    }\n  }\n\n  if (transformedIcons.length > 0) {\n    const importStatements = libraryConfig.import.split(\"\\n\")\n    const addedImports = []\n\n    for (const importStmt of importStatements) {\n      const importMatch = importStmt.match(\n        /import\\s+{([^}]+)}\\s+from\\s+['\"]([^'\"]+)['\"]/\n      )\n\n      if (!importMatch) continue\n\n      const [, importedNames, modulePath] = importMatch\n      const namedImports = importedNames\n        .split(\",\")\n        .map((name) => name.trim())\n        .map((name) => {\n          if (name === \"ICON\") {\n            return transformedIcons.map((icon) => ({ name: icon }))\n          }\n          return { name }\n        })\n        .flat()\n\n      const newImport = sourceFile.addImportDeclaration({\n        moduleSpecifier: modulePath,\n        namedImports,\n      })\n\n      addedImports.push(newImport)\n    }\n\n    if (!_useSemicolon(sourceFile)) {\n      for (const importDecl of addedImports) {\n        importDecl.replaceWithText(importDecl.getText().replace(\";\", \"\"))\n      }\n    }\n  }\n\n  return sourceFile\n}\n\nfunction _useSemicolon(sourceFile: SourceFile) {\n  return (\n    sourceFile.getImportDeclarations()?.[0]?.getText().endsWith(\";\") ?? false\n  )\n}\n","import { Transformer } from \"@/src/utils/transformers\"\nimport { SyntaxKind } from \"ts-morph\"\n\n// Transforms cn-menu-target class based on config.menuColor.\n// If menuColor is \"inverted\", replaces cn-menu-target with \"dark\".\n// Otherwise, removes cn-menu-target entirely.\nexport const transformMenu: Transformer = async ({ sourceFile, config }) => {\n  const menuColor = config.menuColor\n\n  // If menuColor is not set or is \"default\", we remove the placeholder.\n  const replacement = menuColor === \"inverted\" ? \"dark\" : \"\"\n\n  for (const attr of sourceFile.getDescendantsOfKind(SyntaxKind.JsxAttribute)) {\n    const attrName = attr.getNameNode().getText()\n    if (attrName !== \"className\") {\n      continue\n    }\n\n    const initializer = attr.getInitializer()\n    if (!initializer) {\n      continue\n    }\n\n    const text = initializer.getText()\n    if (!text.includes(\"cn-menu-target\")) {\n      continue\n    }\n\n    // Replace cn-menu-target with the replacement value.\n    let newText = text.replace(/cn-menu-target/g, replacement)\n\n    // Clean up extra spaces if we removed the class.\n    if (!replacement) {\n      // Remove double spaces.\n      newText = newText.replace(/\\s{2,}/g, \" \")\n      // Clean up leading/trailing spaces in strings.\n      newText = newText.replace(/\"\\s+/g, '\"')\n      newText = newText.replace(/\\s+\"/g, '\"')\n      // Clean up empty strings in cn() calls.\n      newText = newText.replace(/,\\s*\"\"\\s*,/g, \",\")\n      newText = newText.replace(/\\(\\s*\"\"\\s*,/g, \"(\")\n      newText = newText.replace(/,\\s*\"\"\\s*\\)/g, \")\")\n    }\n\n    attr.setInitializer(newText)\n  }\n\n  return sourceFile\n}\n"]}